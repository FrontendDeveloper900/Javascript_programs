<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Cat Litter Stock Dashboard</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>

body {
    font-family: 'Poppins', sans-serif;
    background: #f5f7fa;
    margin: 0;
    padding: 20px;
}
.search-container {
    width: 50%;
    margin: 0 auto 20px auto;
    position: relative;
}
.search-container input {
    width: 100%;
    padding: 12px 40px 12px 20px;
    border: 1px solid #ccc;
    border-radius: 30px;
    font-size: 16px;
    outline: none;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}
.search-container i {
    position: absolute;
    right: 15px;
    top: 50%;
    transform: translateY(-50%);
    color: #666;
    font-size: 18px;
}
table {
    width: 100%;
    border-collapse: collapse;
    background: white;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 2px 12px rgba(0,0,0,0.1);
    border: solid 3px blue;
}
th, td {
    padding: 15px;
    text-align: center;
}
th {
    background: green;
    color: white;
    cursor: pointer;
    font-size: 16px;
}

tr:hover {
    background-color:rgb(63, 193, 233);
}
.actions button {
    margin: 3px;
    padding: 8px 12px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 14px;
    display: inline-flex;
    align-items: center;
    gap: 5px;
    color: white;
}
.edit-btn { background-color: #2196F3; }
.edit-btn:hover { background-color: #0b7dda; }
.delete-btn { background-color: #f44336; }
.delete-btn:hover { background-color: #da190b; }
.add-btn {
    display: inline-block;
    margin-top: 20px;
    background: yellow;
    color: black;
    padding: 10px 20px;
    font-size: 16px;
    border-radius: 30px;
    border: none;
    cursor: pointer;
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    display: inline-flex;
    align-items: center;
    gap: 10px;
}
.add-btn:hover {
    background: linear-gradient(135deg, #0072ff, #00c6ff);
}
.sort-icon {
    margin-left: 5px;
    font-size: 12px;
}
h1 {
    text-shadow: 2px 3px #FF0000;
    text-align: center;
}


.pagination {
    margin-top: 20px;
    text-align: center;
}
.pagination button {
    background-color: white;
    border: 1px solid #ccc;
    color: #333;
    padding: 8px 12px;
    margin: 2px;
    cursor: pointer;
    border-radius: 6px;
    font-size: 14px;
}
.pagination button.active {
    background-color: #2196F3;
    color: white;
}
.pagination button:hover {
    background-color: #007bff;
    color: white;
}
.pagination .arrow {
    font-weight: bold;
}
</style>
</head>
<body>

<h1><i class="fas fa-boxes-stacked"></i> Clean + Cat Litter Stock Dashboard</h1>

<div class="search-container">
    <input type="text" id="searchBar" onkeyup="searchTable()" placeholder="Search by Item Name...">
    <i class="fas fa-search"></i>
</div>

<table id="stockTable">
    <thead>
        <tr>
            <th onclick="sortTable()">Item Name <i id="sortIcon" class="fas fa-sort sort-icon"></i></th>
            <th>Available Stock</th>
            <th>Sale</th>
            <th>New Stock Added</th>
            <th>Weight</th>
            <th>Flavour</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
    </tbody>
</table>

<div class="pagination" id="pagination"></div>

<div style="text-align: center;">
    <button class="add-btn" onclick="addNewItem()">
        <i class="fas fa-plus"></i> Add New Item
    </button>
</div>

<script>
let stockData = JSON.parse(localStorage.getItem('stockData')) || [];
let sortAsc = true;
let currentPage = 1;
const rowsPerPage = 5;

function saveData() {
    localStorage.setItem('stockData', JSON.stringify(stockData));
}

function renderTable() {
    const tbody = document.getElementById('stockTable').getElementsByTagName('tbody')[0];
    tbody.innerHTML = "";

    let start = (currentPage - 1) * rowsPerPage;
    let end = start + rowsPerPage;
    let paginatedItems = stockData.slice(start, end);

    paginatedItems.forEach((item, index) => {
        const row = tbody.insertRow();
        row.insertCell(0).innerText = item.name;
        row.insertCell(1).innerText = item.availableStock;
        row.insertCell(2).innerText = item.sold;
        row.insertCell(3).innerText = item.newStock;
        row.insertCell(4).innerText = item.weight;
        row.insertCell(5).innerText = item.flavour;
        const actionCell = row.insertCell(6);
        actionCell.classList.add('actions');
        actionCell.innerHTML = `
            <button class="edit-btn" onclick="editItem(${start + index})">
                <i class="fas fa-pen"></i> Edit
            </button>
            <button class="delete-btn" onclick="deleteItem(${start + index})">
                <i class="fas fa-trash"></i> Delete
            </button>
        `;
    });

    renderPagination();
}

function renderPagination() {
    const pagination = document.getElementById('pagination');
    pagination.innerHTML = "";

    let pageCount = Math.ceil(stockData.length / rowsPerPage);

    const prevButton = document.createElement('button');
    prevButton.innerHTML = '<i class="fas fa-arrow-left"></i>';
    prevButton.disabled = currentPage === 1;
    prevButton.classList.add('arrow');
    prevButton.onclick = () => {
        currentPage--;
        renderTable();
    };
    pagination.appendChild(prevButton);

    for (let i = 1; i <= pageCount; i++) {
        const btn = document.createElement('button');
        btn.innerText = i;
        if (i === currentPage) btn.classList.add('active');
        btn.onclick = () => {
            currentPage = i;
            renderTable();
        };
        pagination.appendChild(btn);
    }

    const nextButton = document.createElement('button');
    nextButton.innerHTML = '<i class="fas fa-arrow-right"></i>';
    nextButton.disabled = currentPage === pageCount;
    nextButton.classList.add('arrow');
    nextButton.onclick = () => {
        currentPage++;
        renderTable();
    };
    pagination.appendChild(nextButton);
}

function addNewItem() {
    const name = prompt("Enter Item Name:");
    const availableStock = prompt("Enter Available Stock:") || "0";
    const sold = prompt("Enter Sold Units:") || "0";
    const newStock = prompt("Enter New Sale Added:") || "0";
    let weight = prompt("Select Weight: 5kg, 10kg, 25kg (type exactly)");
    if (!["5kg", "10kg", "25kg"].includes(weight)) {
        alert("Invalid weight. Please enter 5kg, 10kg, or 25kg.");
        return;
    }
    const flavour = prompt("Enter Flavour:") || "";

    if (name && weight && flavour) {
        const newItem = { name, availableStock, sold, newStock, weight, flavour };
        stockData.push(newItem);
        saveData();
        currentPage = Math.ceil(stockData.length / rowsPerPage); 
        renderTable();
    } else {
        alert("Item Name, Weight aur Flavour zaroori hai!");
    }
}

function editItem(index) {
    const item = stockData[index];
    const name = prompt("Edit Item Name:", item.name);
    const availableStock = prompt("Edit Available Stock:", item.availableStock) || "0";
    const sold = prompt("Edit Sold Units:", item.sold) || "0";
    const newStock = prompt("Edit New Stock Added:", item.newStock) || "0";
    let weight = prompt("Edit Weight (5kg, 10kg, 25kg):", item.weight);
    if (!["5kg", "10kg", "25kg"].includes(weight)) {
        alert("Invalid weight. Please enter 5kg, 10kg, or 25kg.");
        return;
    }
    const flavour = prompt("Edit Flavour:", item.flavour) || "";

    if (name && weight && flavour) {
        stockData[index] = { name, availableStock, sold, newStock, weight, flavour };
        saveData();
        renderTable();
    } else {
        alert("Please Item Name, Weight and Flavour Add");
    }
}

function deleteItem(index) {
    if (confirm("Are you sure you want to delete this item?")) {
        stockData.splice(index, 1);
        saveData();
        if (currentPage > Math.ceil(stockData.length / rowsPerPage)) {
            currentPage--;
        }
        renderTable();
    }
}

function searchTable() {
    const input = document.getElementById('searchBar').value.toUpperCase();
    const table = document.getElementById('stockTable');
    const tr = table.getElementsByTagName('tr');
    for (let i = 1; i < tr.length; i++) {
        const td = tr[i].getElementsByTagName('td')[0];
        if (td) {
            const textValue = td.textContent || td.innerText;
            tr[i].style.display = textValue.toUpperCase().includes(input) ? "" : "none";
        }
    }
}

function sortTable() {
    stockData.sort((a, b) => {
        const nameA = a.name.toLowerCase();
        const nameB = b.name.toLowerCase();
        if (nameA < nameB) return sortAsc ? -1 : 1;
        if (nameA > nameB) return sortAsc ? 1 : -1;
        return 0;
    });
    sortAsc = !sortAsc;
    document.getElementById('sortIcon').className = sortAsc ? 'fas fa-sort-up sort-icon' : 'fas fa-sort-down sort-icon';
    renderTable();
}

renderTable();
function searchTable() {
    const input = document.getElementById('searchBar').value.trim().toUpperCase();
    const tbody = document.getElementById('stockTable').getElementsByTagName('tbody')[0];

    if (input === "") {
        document.getElementById('pagination').style.display = "block";
        renderTable();
        return;
    }

    document.getElementById('pagination').style.display = "none";
    tbody.innerHTML = "";

    const filteredData = stockData.filter(item =>
        item.name.toUpperCase().includes(input)
    );

    filteredData.forEach(item => {
        const row = tbody.insertRow();
        row.insertCell(0).innerText = item.name;
        row.insertCell(1).innerText = item.availableStock;
        row.insertCell(2).innerText = item.sold;
        row.insertCell(3).innerText = item.newStock;
        row.insertCell(4).innerText = item.weight;
        row.insertCell(5).innerText = item.flavour;
        const actionCell = row.insertCell(6);
        actionCell.classList.add('actions');
        const idx = stockData.indexOf(item);
        actionCell.innerHTML = `
            <button class="edit-btn" onclick="editItem(${idx})">
                <i class="fas fa-pen"></i> Edit
            </button>
            <button class="delete-btn" onclick="deleteItem(${idx})">
                <i class="fas fa-trash"></i> Delete
            </button>
        `;
    });
}
function searchTable() {
    const input = document.getElementById('searchBar').value.trim().toUpperCase();
    const tbody = document.getElementById('stockTable').getElementsByTagName('tbody')[0];

    if (input === "") {
        document.getElementById('pagination').style.display = "block";
        renderTable();
        return;
    }

   
    document.getElementById('pagination').style.display = "none";
    tbody.innerHTML = "";

    const filteredData = stockData.filter(item =>
        item.name.toUpperCase().includes(input)
    );

   
    filteredData.forEach(item => {
        const row = tbody.insertRow();
        row.insertCell(0).innerText = item.name;
        row.insertCell(1).innerText = item.availableStock;
        row.insertCell(2).innerText = item.sold;
        row.insertCell(3).innerText = item.newStock;
        row.insertCell(4).innerText = item.weight;
        row.insertCell(5).innerText = item.flavour;
        const actionCell = row.insertCell(6);
        actionCell.classList.add('actions');
        // index के लिए global index lookup करो
        const idx = stockData.indexOf(item);
        actionCell.innerHTML = `
            <button class="edit-btn" onclick="editItem(${idx})">
                <i class="fas fa-pen"></i> Edit
            </button>
            <button class="delete-btn" onclick="deleteItem(${idx})">
                <i class="fas fa-trash"></i> Delete
            </button>
        `;
    });
}


</script>

</body>
</html>
